 -- Configura View
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
GO

-- Apagar view
IF  EXISTS (SELECT * FROM sys.views WHERE object_id = OBJECT_ID(N'[dbo].[VW_MG060]'))
DROP VIEW [dbo].[VW_MG060]
GO

CREATE VIEW [dbo].[VW_MG060]
WITH ENCRYPTION
AS

SELECT
  MG060_NR_INST  ,
  CB050_NM_INST  ,
  MG060_CD_EMIEMP,
  CB053_DS_EMIEMP,
  MG060_CD_VAR   ,
  MG060_DS_VAR   ,
  MG060_QT_CARAC ,
  MG060_ID_ATIVO ,
  MG060_ID_ATIVO_label = CASE MG060_ID_ATIVO
    WHEN 1 THEN 'Ativa'      
    ELSE 'Inativa'
  END,  
  MG060_CD_OPESIS,
  MG060_DT_INCSIS,
  MG060_DT_ATUSIS
FROM
  MG060,
  CB050,
  CB053
WHERE
/* INSTITUIÇÃO */
    MG060_NR_INST   = CB050_NR_INST
/* EMISSOR/EMPRESA */
AND MG060_NR_INST   = CB053_NR_INST   
AND MG060_CD_EMIEMP = CB053_CD_EMIEMP


GO