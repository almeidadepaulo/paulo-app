-- Configura View
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
GO

-- Apaga view
IF  EXISTS (SELECT * FROM sys.views WHERE object_id = OBJECT_ID(N'[dbo].[VW_BN008]'))
DROP VIEW [dbo].[VW_BN008]
GO

-- Cria View
CREATE VIEW [dbo].[VW_BN008]
WITH ENCRYPTION
AS
SELECT     
  BN008.BN008_NR_BANCO,
  BN008.BN008_NR_AGENC,
  BN008.BN008_NM_AGENC,
  BN008.BN008_NR_OPESIS,
  BN008.BN008_DT_INCSIS,
  BN008.BN008_DT_ATUSIS,
  
  Cast(dbo.BN008.BN008_NR_AGENC as varchar)+' - '+ dbo.BN008.BN008_NM_AGENC AS BN008_NR_NM_AGENC,

  -- BANCO
  BN007.BN007_NR_BANCO,
  BN007.BN007_NM_BANCO,
  BN007.BN007_NR_OPESIS,
  BN007.BN007_DT_INCSIS,
  BN007.BN007_DT_ATUSIS
             
  FROM dbo.BN008 

  LEFT OUTER JOIN dbo.BN007 
  ON dbo.BN008.BN008_NR_BANCO = dbo.BN007.BN007_NR_BANCO

GO
