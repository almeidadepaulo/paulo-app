-- Configura View
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
GO

-- Apaga view
IF  EXISTS (SELECT * FROM sys.views WHERE object_id = OBJECT_ID(N'[dbo].[VW_CB063]'))
DROP VIEW [dbo].[VW_CB063]
GO

-- Cria View
CREATE VIEW [dbo].[VW_CB063]
WITH ENCRYPTION
AS
 SELECT
  CB063.CB063_NR_INST  ,
  CB063.CB063_CD_EMIEMP,
  CB063.CB063_CD_PUBLIC,
  CB063.CB063_NR_SEQ   ,
  CB063.CB063_TP_REGRA ,
  CB063.CB063_NR_OPR   ,
  CB063.CB063_NR_DIAS  ,
  CB063.CB063_NR_CODMSG,
  CB063.CB063_CD_OPESIS,
  CB063.CB063_DT_INCSIS,
  CB063.CB063_DT_ATUSIS,
  -- OPERADOR
  CB050.CB050_NM_INST  ,
  -- EMISSOR/EMPRESA
  CB053.CB053_DS_EMIEMP,
  -- PUBLICACAO
  CB060.CB060_DS_PUBLIC

  FROM CB063

  LEFT OUTER JOIN CB050 AS CB050  -- BANCO
  ON  CB050_NR_INST    = CB063_NR_INST

  LEFT OUTER JOIN CB053 AS CB053  -- EMISSOR/EMPRES
  ON  CB053_NR_INST    = CB063_NR_INST
  AND CB053_CD_EMIEMP  = CB063_CD_EMIEMP
  
  LEFT OUTER JOIN CB060 AS CB060  -- PUBLICACAO
  ON  CB060_NR_INST    = CB063_NR_INST
  AND CB060_CD_EMIEMP  = CB063_CD_EMIEMP
  AND CB060_CD_PUBLIC  = CB063_CD_PUBLIC
GO